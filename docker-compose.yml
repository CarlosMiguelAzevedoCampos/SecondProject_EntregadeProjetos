version: '3.4'

services:
  cma.ismai.delivery.api.ui:
    image: ${DOCKER_REGISTRY-}cmaismaideliveryapiui
    networks:
      - deliveryproject_network
    container_name: cmaismaideliveryapiuis
    ports:
    - 5668:80
    - 5669:443
    restart: always
    build:
      context: .
      dockerfile: CMA.ISMAI.Delivery.API.UI/Dockerfile
    volumes:
      - C:/Users/Carlos Campos/Desktop/Production/Unzip:/Production/Unzip 
      - C:/Users/Carlos Campos/Desktop/Production/Zip:/Production/Zip 
    environment:
      - RabbitMqCore__Uri=rabbitmq 
      - RabbitMqCore__Username=admin
      - RabbitMqCore__Password=admin 
      - RabbitMqCore__Port=5672 
      - ElasticConfiguration__Uri=http://elasticsearch:9200/
      - EventStore__IPAddress=tcp://admin:changeit@eventstore:1113 
      - FilePathZip__Path=C:/Users/Carlos Campos/Desktop/Production/Zip
      - FilePathUnzip__Path=C:/Users/Carlos Campos/Desktop/Production/Unzip

  cma.ismai.delivery.fileprocessing.ui:
    image: ${DOCKER_REGISTRY-}cmaismaideliveryfileprocessingui
    networks:
      - deliveryproject_network
    restart: always
    container_name: cmaismaideliveryfileprocessingui
    build:
      context: .
      dockerfile: CMA.ISMAI.Delivery.FileProcessing.UI/Dockerfile
    volumes:
      - C:/Users/Carlos Campos/OneDrive/Document:/Document/OneDrive
      - C:/Users/Carlos Campos/Desktop/ismai.xlsx:/Jury/ismai.xlsx
    environment:
      - RabbitMqCore__Uri=rabbitmq 
      - RabbitMqCore__Username=admin 
      - RabbitMqCore__Password=admin
      - RabbitMqCore__Port=5672 
      - ElasticConfiguration__Uri=http://elasticsearch:9200/ 
      - EventStore__IPAddress=tcp://admin:changeit@eventstore:1113 
      - Camunda__Uri=http://camunda:8080/engine-rest/engine/default/
      - FilePathJury__Path=//Jury//ismai.xlsx
      - OneDrive__Path=C:/Users/Carlos Campos/OneDrive/Document
      - TimeToFetch__Time=43200 
      - TaskPerFetch__Time=30 
      - Notificaiton__Email=carlosmiguelcampos1996@gmail.com
  cma.ismai.delivery.payment.ui:
    image: ${DOCKER_REGISTRY-}cmaismaideliverypaymentui
    networks:
      - deliveryproject_network
    container_name: cmaismaideliverypaymentui
    restart: always
    build:
      context: .
      dockerfile: CMA.ISMAI.Delivery.Payment.UI/Dockerfile
    volumes:
      - C:/Users/Carlos Campos/Desktop/excel.xlsx:/Payment/excel.xlsx 
    environment:
      - COMPOSE_CONVERT_WINDOWS_PATHS=1 
      - RabbitMqCore__Uri=rabbitmq 
      - RabbitMqCore__Username=admin 
      - RabbitMqCore__Password=admin 
      - RabbitMqCore__Port=5672
      - ElasticConfiguration__Uri=http://elasticsearch:9200/
      - EventStore__IPAddress=tcp://admin:changeit@eventstore:1113 
      - Camunda__Uri=http://camunda:8080/engine-rest/engine/default/ 
      - FilePathPayment__Path=//Payment//excel.xlsx 
      - TimeToFetch__Time=86400
      - TaskPerFetch__Time=30
      - Notification__ManualProcessing=carlosmiguelcampos1996@gmail.com 
      - Notification__University=carlosmiguelcampos1996@gmail.com 
  cma.ismai.delivery.fileloading.ui:
    image: ${DOCKER_REGISTRY-}cmaismaideliveryfileloadingui
    networks:
      - deliveryproject_network
    container_name: cmaismaideliveryfileloadingui
    restart: always
    build:
      context: .
      dockerfile: CMA.ISMAI.Delivery.FileLoading.UI/Dockerfile
    volumes:
      - C:/Users/Carlos Campos/Desktop/Production/Unzip:/Production/Unzip 
      - C:/Users/Carlos Campos/Desktop/Production/Zip:/Production/Zip 
    environment:
      - RabbitMqCore__Uri=rabbitmq 
      - RabbitMqCore__Username=admin
      - RabbitMqCore__Password=admin
      - RabbitMqCore__Port=5672
      - ElasticConfiguration__Uri=http://elasticsearch:9200/
      - EventStore__IPAddress=tcp://admin:changeit@eventstore:1113
      - Camunda__Uri=http://camunda:8080/engine-rest/engine/default/
      - FilePathZip__Path=C:/Users/Carlos Campos/Desktop/Production/Zip
      - FilePathUnzip__Path=C:/Users/Carlos Campos/Desktop/Production/Unzip
      - Notificaiton__Email=carlosmiguelcampos1996@gmail.com
  cma.ismai.delivery.ui:
    image: ${DOCKER_REGISTRY-}cmaismaideliveryui
    networks:
      - deliveryproject_network
    container_name: cmaismaideliveryui
    restart: always
    ports:
    - 5778:80
    - 5779:443
    build:
      context: .
      dockerfile: CMA.ISMAI.Delivery.UI/Dockerfile
    environment:
      - ElasticConfiguration__Uri=http://elasticsearch:9200/ 
      - EventStore__IPAddress=tcp://admin:changeit@eventstore:1113
      - API_File_ZIP__Uri=http://cmaismaideliveryapiui/api/Deliveries/UploadWithFile
      - API_File_URL__Uri=http://cmaismaideliveryapiui/api/Deliveries/UploadWithLink
   
volumes:
  elasticsearch-data:
networks:
  deliveryproject_network:
    driver: bridge
